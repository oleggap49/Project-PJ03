# Project-PJ03
Итоговый проект раздела "Основные конструкции языка С++"
 Cписок участников команды
1. Гапоненко О.В. (работал один)
2. Соответственно  тимлид- он же.
3. Описание выбранной идеи решения 
 Организован бесконечный цикл, читающий символы с консоли.
 Допустимые команды 
         'r'  - регистрирaция нового пользователя  
         'a' - авторизация 
         'q'  - выйти из программы   
         'h' - получить помошь  
                 Авторизированный пользователь может 
         'm'- написать сообщение получателю 
                если в имени получателя ввести ALL - сообщение всем участникам чата.  
                  Администратор чата может дополнительно  
         'l' - прочесть архив . 
  Прочие символы вызывают сообщение об ошибке.
  Каждый цикл выводится информация о зарегистрированных пользователях.
1.Используются два пользовательских класса User и Message
User - информация о пользователе,
Message  - информация о сообщении, 
 и шаблонный класс XArray  для организации контейнера, позволяющего хранить объекты любого типа  и динамически изменяющего свой размер свой размер. 

2. Инициализация чата
2.1. При старте чата создается контейнер для хранения данных о зарегистрированных пользователях user_arr (явная специализация шаблонного класса XArray
для типа User) и два контейнера для хранения данных о непрочитанных и архивных сообщнениях:mes_arr и logm_arr (явные специализации шаблонного класса XArray
для типа Message). Все контейнеры первоначально имеют единичный размер (одна запись).
2.2. Автоматически создается первый пользователь чата admin с правами администраторв и соответствующий ему экземпляр класса User заносится в 0-ю запись
контейнера user_arr. 0-е записи контейнеров mes_arr и logm_arr - технические, в работе они не используются.
3. Регистрация нового пользователя
При регистрации предлагается ввести с консоли Имя и пароль. Предполагается что имя и login  совпвдают. Имя - любая непустая строка символов кроме
"ALL". Строка "ALL" зарезервированна под групповую рассылку. При вводе имени осуществляется проверка на существовании введенной строки в списке уже
зарегистрированных. При успешной регистрации - создается экземпляр класса User и добавляется а контейнер user_arr.
4. Авторизация пользователя
При авторизации с консоли вводится имя (с проверкой, сушествует ли такой зарегистрированный пользователь) и пароль ( с проверкой на совпадение с
 рарегистрированными данными). После авторицации соответствующему пользователю присваивается признак "авторизован". Он используется при отправке сообщений.
Перебором записей в контейнере непрочтенных сообщений mes_arr проверяется , есть ли сообшения для этого пользователя. Если есть, имя отправителя, время 
написания и текст сообщения выводятся на консоль  и им присваивается признак "Прочтено". Фиксируется время прочтения. После этого прочтенное сообщение 
удаляется из mes_arr и переносится в архив logm_arr. 
 Контейнеры mes_arr и logm_arr динамически изменяют свои размеры.
5. Отправка сообщения
 Проводится проверка на авторизацию (сообщения может отправлять только авторизированный ползователь). Далее вводится текст сообщения и имя адресата с
проверкой - существует ли такой пользователь. Фиксируется время отправки.
6. Групповая рассылка
При вводе в запрос имени адресата строки "ALL" экземпляр сообщения доставляется всем зарегистрированным пользователям, кроме самого оптравителя.
7. Нештатные ситуации
 При возникновении нештатной ситуации связвнной с неверными данными (Попытка регистрации под уже сушествующим именем,
   попытка отправить сообщение несуществующему пользователю , неверный пароль и т.п.) обрабатывается соответствующее исключение, позволяющее ввести 
команду повторно.
8. Пользователю с правами администратора доступна команда чтения архива. В архив заносятся все   прочтенные сообщения с информацией об отправителе 
и получателе и времени написания и прочтения.
9. Поскольку работа с файловой системой не предполагалась, при завершении программы все данные исчезают.
 
Описание пользовательских типов и функций в проекте:
Классы и шаблонные классы

1. Класс User
1. Класс описания пользователя. 
1. Поля 
1.   _nickname - Имя ( оно же login);
	  _password - Пароль;
	  _admin - признак администратора;
	 _autorized - признак авторизованного пользователя;
  1. Методы - соответствующие сеттеры и геттеры.

2. Класс Message
1. Класс описания парметров сообщения.
1. Поля
1.    _sender_id - идентификатор отправителя;
	  _recipient_id - идентификатор получателя;
	  _text - текст сообщкния;
	  _sent - время отправления;
	  _read - время прочтения;
	  _HasBeenRead признак "прочтено";
   1. Методы - соответствующие сеттеры и геттеры. Для временных полей - одни и техе методы с параметром
   1. 's' - время отправления, любой другой символ - время прочтения.
    
   1. Шаблонный класс XArray
   1. организует контейнер для хранения любого типа данных. Динамически добавляет и удаляет записи,
   1. изменяя свой размер по мере необходимости.
   1.  При разработке шаблона XArray были использованы материалы домашнего задания модуля 8.
   В программе используется для хранения экземпляров класса User и Maessage
    1. 
    1. Пользовательские процедуры
    1. 
    1. SearchNick(string Nick, XArray<User>& user_arr, int& user_id) -
    1. - процедура поиска по Имени в контейнере пользователей user_arr,
 при успешном поиске устанавливает идентификатор найденного пользователя user_id и возвращает true
 если не нашла -возвращает false.
    1. SendMessage(int user_id, int rec_id, string Text,int& mess_count, XArray<Message>& mes_arr)
     - процедура создает новое сообщение и помещает его в контейнер непрочтенных сообщений
  в случае успеха - возвращает true.
      
     Обработка исключений.
     
     Разработаны классы -наследники exception  (файл MyExceptions.h) для перхвата нештатных ситуаций связанных с неверным вводом данных
 
